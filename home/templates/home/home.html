{% extends 'global/base.html' %}
{% load static %}

{% block texto %}

<style>
  
    .hype-strip {
        background-color: var(--primary-color);
        color: var(--secondary-color);
        overflow: hidden;
        white-space: nowrap;
        padding: 12px 0;
        border-top: 2px solid var(--secondary-color);
        border-bottom: 2px solid var(--primary-color);
        position: relative;
        z-index: 20;
    }

    .hype-content {
        display: inline-block;
        animation: marquee 25s linear infinite;
        font-family: var(--font-heading);
        font-weight: 700;
        text-transform: uppercase;
        font-size: 1.1rem;
        letter-spacing: 2px;
    }
    
    /* Separador visual dentro do marquee */
    .hype-separator {
        color: var(--accent-color);
        margin: 0 1.5rem;
    }

    @keyframes marquee {
        0% { transform: translateX(0); }
        100% { transform: translateX(-50%); }
    }

    /* 2. Grid de Categorias (Nav Visual) */
    .category-section {
        padding: 0; /* Full width visualmente */
        margin-top: 2rem;
    }
    
    .cat-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: var(--spacing-default);
        max-width: var(--max-width);
        margin: 0 auto;
        padding: 0 var(--spacing-default);
    }

    .cat-card {
        position: relative;
        height: 450px; /* Altura imponente */
        border: 2px solid var(--primary-color);
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
    }

    .cat-card img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        filter: grayscale(100%) brightness(0.7); /* Estilo Dark/Street */
    }

    .cat-title {
        position: absolute;
        z-index: 2;
        color: var(--secondary-color);
        font-size: 3rem;
        font-weight: 900;
        text-transform: uppercase;
        border: 4px solid var(--secondary-color);
        padding: 0.5rem 1.5rem;
        background-color: rgba(0,0,0,0.3);
        transition: all 0.3s ease;
    }

    /* Hover Effect nas Categorias */
    .cat-card:hover img {
        transform: scale(1.1);
        filter: grayscale(0%) brightness(1); /* Ganha cor no hover */
    }
    .cat-card:hover .cat-title {
        background-color: var(--accent-color);
        border-color: var(--accent-color);
        color: var(--secondary-color);
    }

  <style>
   
    .manifesto-section {
        /* Configurações do Fundo */
        background-color: var(--primary-color);
        color: var(--secondary-color); 
        /* Espaçamento e Bordas */
        padding: 6rem 1rem;
        margin: 4rem 0;
        border-top: 4px solid var(--accent-color);
        border-bottom: 4px solid var(--accent-color);
        
      
        display: flex;            
        flex-direction: column;   
        justify-content: center;   
        align-items: center;       
        text-align: center;        
    }

    .manifesto-title {
        font-family: var(--font-heading);
        font-size: clamp(2rem, 5vw, 4rem); 
        line-height: 1.1;
        text-transform: uppercase;
        font-style: italic; 
        margin: 0;          
        max-width: 900px;   
    }

    .manifesto-subtitle {
        font-family: var(--font-body);
        font-size: 1.1rem;
        letter-spacing: 4px; 
        color: #ccc;         
        margin-top: 1.5rem;
        text-transform: uppercase;
        font-weight: 700;
    }
</style>


<main>

    <div class="carousel-container">
        <div class="carousel-slide">
            <div class="carousel-item">
                <img src="/static/global/image/banner.jpeg" alt="Banner Nova Coleção 1" />
                <div class="banner-content">
                    <h1>NOVA COLEÇÃO</h1>
                    <p>Rebeldia, atitude e autenticidade.</p>
                    <a href="#">Explorar</a>
                </div>
            </div>
            <div class="carousel-item">
                <img src="/static/global/image/banner2.jpg" alt="Promoção de Verão" />
                <div class="banner-content">
                    <h1>VERÃO 2026</h1>
                    <p>Novas peças para o calor urbano.</p>
                    <a href="#">Conferir</a>
                </div>
            </div>
            <div class="carousel-item">
                <img src="/static/global/image/banner3.jpg" alt="Disponível frete grátis" />
                <div class="banner-content">
                    <h1>LANÇAMENTO EXCLUSIVO</h1>
                    <p>Tênis VTR - Conforto e Estilo.</p>
                    <a href="#">Comprar agora</a>
                </div>
            </div>
        </div>
    
        <button id="prevBtn" class="carousel-btn prev">&#10094;</button>
        <button id="nextBtn" class="carousel-btn next">&#10095;</button>
    
        <div class="carousel-dots-container"></div>
    </div>

    <div class="hype-strip">
        <div class="hype-content">
            NOVA COLEÇÃO BLACK ICE DISPONÍVEL <span class="hype-separator">///</span> 
            FRETE GRÁTIS PARA TODO BRASIL <span class="hype-separator">///</span> 
            PARCELAMENTO EM ATÉ 12X <span class="hype-separator">///</span> 
            VTRSTORE ORIGINALS <span class="hype-separator">///</span> 
            NOVA COLEÇÃO BLACK ICE DISPONÍVEL <span class="hype-separator">///</span> 
            FRETE GRÁTIS PARA TODO BRASIL <span class="hype-separator">///</span> 
            PARCELAMENTO EM ATÉ 12X <span class="hype-separator">///</span> 
            VTRSTORE ORIGINALS <span class="hype-separator">///</span>
        </div>
    </div>

    <section class="category-section">
        <div class="section-header" style="justify-content: center; margin-bottom: 2rem;">
            <h2>EXPLORE POR CATEGORIA</h2>
        </div>
        
        <div class="cat-grid">
            <a href="{% url 'moletons' %}" class="cat-card">
                <img src="/static/global/image/moletonurban2.jpg" alt="Moletons">
                <span class="cat-title">MOLETONS</span>
            </a>
            
            <a href="{% url 'camisetas' %}" class="cat-card">
                <img src="/static/global/image/dropblackice1.jpg" alt="Camisetas">
                <span class="cat-title">TOPS</span>
            </a>

            <a href="{% url 'calcas' %}" class="cat-card">
                <img src="/static/global/image/calçaurban2.jpg" alt="Calças">
                <span class="cat-title">BOTTOMS</span>
            </a>
        </div>
    </section>

    <section id="best-sellers" style="max-width: var(--max-width); margin: 0 auto; padding: 2rem var(--spacing-default);">
        <div class="section-header">
            <h2 style="font-size: 2.5rem;">DROP: DESTAQUES</h2>
            <a href="{% url 'colecao' %}" style="font-weight: 700; font-size: 0.9rem; text-transform: uppercase; border-bottom: 2px solid var(--accent-color);">Ver Loja Completa →</a>
        </div>

       <div class="grid">
    {% for product in products %}
        <div class="card quick-view-trigger" 
             data-product-id="{{ product.id }}"
             data-name="{{ product.name }}"
             data-price="{{ product.price }}"
             data-description="{{ product.description }}"
             /* Se tiver imagem no banco usa ela, senão usa um placeholder */
             data-image="{% if product.image %}{{ product.image.url }}{% else %}/static/global/image/placeholder.jpg{% endif %}"
             data-sizes="P,M,G,GG"
             data-colors="Preto,Branco"
             data-url="{% url 'produto_detalhe' product.id %}">
             
            <div class="product-img-wrapper">
                {% if product.image %}
                    <img src="{{ product.image.url }}" alt="{{ product.name }}">
                {% else %}
                    <img src="https://placehold.co/600x800/000000/FFFFFF/png?text=VTR" alt="Sem Imagem">
                {% endif %}
            </div>
            
            <div class="card-body">
                <h4>{{ product.name }}</h4>
                <span class="oldprice">R$ {{ product.price|add:"50" }}</span>
                <span class="price">R$ {{ product.price }}</span>
            </div>
        </div>
    {% empty %}
        <p>Nenhum produto em destaque no momento.</p>
    {% endfor %}
</div>

   <section class="manifesto-section">
    <h2 class="manifesto-title">Não seguimos tendências.<br>Nós as criamos.</h2>
    <p class="manifesto-subtitle">VTRSTORE /// EST. 2025 /// RIO DE JANEIRO</p>
</section>
</main>
  {% include 'global/partials/_quick_view_modal.html' %}
<script>
    const carouselSlide = document.querySelector('.carousel-slide');
    if (carouselSlide) {
        const carouselItems = document.querySelectorAll('.carousel-item');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const dotsContainer = document.querySelector('.carousel-dots-container');

        let currentIndex = 0;
        let slideWidth = carouselItems[0].clientWidth;
        const totalSlides = carouselItems.length;
        let autoSlideInterval;

        function createDots() {
            dotsContainer.innerHTML = '';
            carouselItems.forEach((_, index) => {
                const dot = document.createElement('span');
                dot.classList.add('carousel-dot');
                if (index === currentIndex) dot.classList.add('active');
                dot.addEventListener('click', () => {
                    goToSlide(index);
                    resetAutoSlide();
                });
                dotsContainer.appendChild(dot);
            });
        }

        function goToSlide(index) {
            if (index < 0) currentIndex = totalSlides - 1;
            else if (index >= totalSlides) currentIndex = 0;
            else currentIndex = index;
            carouselSlide.style.transform = `translateX(${-currentIndex * slideWidth}px)`;
            updateDots();
        }

        function updateDots() {
            const dots = document.querySelectorAll('.carousel-dot');
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentIndex);
            });
        }

        if(nextBtn) nextBtn.addEventListener('click', () => { goToSlide(currentIndex + 1); resetAutoSlide(); });
        if(prevBtn) prevBtn.addEventListener('click', () => { goToSlide(currentIndex - 1); resetAutoSlide(); });

        function startAutoSlide() { autoSlideInterval = setInterval(() => { goToSlide(currentIndex + 1); }, 5000); }
        function stopAutoSlide() { clearInterval(autoSlideInterval); }
        function resetAutoSlide() { stopAutoSlide(); startAutoSlide(); }

        window.addEventListener('resize', () => {
            slideWidth = carouselItems[0].clientWidth;
            goToSlide(currentIndex);
        });

        createDots();
        startAutoSlide();
    }
</script>

{% endblock texto %}